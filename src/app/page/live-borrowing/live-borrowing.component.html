<app-nav></app-nav>
<nav class="navbar navbar-expand-lg navbar-dark container col-11" style="background-color: #12620c;">

    <a class="navbar-brand text-center mx-auto" style="color:white; ">Live Borrowing </a>
</nav>
<div class="container py-4">

    <h2>On Going Borrowings</h2>

    <form class="form-inline py-4 col-12" style="margin-top: 9px;" *ngIf="allBorrowedDetails.length!=0" data-aos="fade-up" data-aos-duration="1000">
        <input type="search" (ngModelChange)="searchDetails(key.value)" #key="ngModel" ngModel name="key"
            id="searchDetails" class="form-control mr-sm-2" placeholder="Search Details as username,booktitle" required>
    </form>

    <table class="table table-striped table-sm " *ngIf="allBorrowedDetails.length!=0" data-aos="fade-up" data-aos-duration="1000">
        <thead class="table-head">
            <tr>
                <th scope="col">Transaction Id</th>
                <th scope="col">Borrower(Id/username)</th>
                <th scope="col">Books_Ids</th>
                <th scope="col">Book_Titles</th>
                <th scope="col">Borrowed_Date</th>
                <th scope="col">Return_Date</th>


            </tr>
        </thead>
        <tbody>

            <tr *ngFor="let borrowerDetail of allBorrowedDetails">
                <td>{{borrowerDetail.id}}</td>
                <td>{{borrowerDetail.borrowerID+" / "+borrowerDetail.borrowerName}}</td>
                <td>{{borrowerDetail.books}}<br></td>
                <td>{{borrowerDetail.bookTitles}}</td>
                <td>{{borrowerDetail.date}}</td>
                <td><input [(ngModel)]="this.borrowerDetail.returnedDate" type="text" placeholder=" yyyy-mm-dd"
                        style="width: 150px;"></td>
                <td><button [disabled]="this.borrowerDetail.returnedDate==null || this.borrowerDetail.returnedDate==''"
                        (click)="returnBooks(borrowerDetail)" class="btn btn-primary">Return</button></td>

            </tr>

        </tbody>
    </table>


    <div *ngIf="allBorrowedDetails.length==0" class="col-lg-12 col-md-12 col-xl-12">
        <div class="alert alert-info" role="alert">
            <h4 class="alert-heading">NO BORROWING!</h4>
            <p>No Borrowing Details were found.</p>
        </div>
    </div>
</div>